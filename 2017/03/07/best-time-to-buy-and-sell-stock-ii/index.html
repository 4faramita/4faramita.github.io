<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>122. Best Time to Buy and Sell Stock II | 之言片语</title>

  
  <meta name="author" content="4faramita">
  

  
  <meta name="description" content="Buried alive.">
  

  
  
  <meta name="keywords" content="algorithm">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="122. Best Time to Buy and Sell Stock II"/>

  <meta property="og:site_name" content="之言片语"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="之言片语" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">之言片语</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/tags/algorithm">Algorithms</a></li>
      
        <li><a href="/tags/thinking">Thoughts</a></li>
      
        <li><a href="/tags/works">Works</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>122. Best Time to Buy and Sell Stock II</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/07/best-time-to-buy-and-sell-stock-ii/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-06T16:38:00.000Z">
          2017-03-07
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p><strong>Difficulty: Easy</strong></p>
<p>Say you have an array for which the i(th) element is the price of a given stock on day i.</p>
<p>Design an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times). However, you may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).</p>
<p>给出一个数列，第 i 个位置代表第 i 天的股价，求最大利润。<br>隐含条件是每次买卖一股，本金不限。</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>思路：<br>炒股的思路很简单：高买低卖。<br>本题等于有上帝视角，那么只需找出所有单调递增段，最低点买入最高点卖出即可。</p>
<p>定义变量：<br>low：当前单调递增周期中低点；若位于单调递减周前则为 None<br>high：当前单调递增周期中高点；<br>profit：累计利润<br>up：标记是否位于单调递增区间。</p>
<p>扫描一遍数列：<br>开始时长度小于 3 的基本情况。</p>
<p>数列更大时：维护当前单调递增周期的 low 与 high；<br>当前单调递增周期结束时（后一值小于前一值）结算一次利润，同时 up = False，low = None<br>重新到达单调递增区间时重新设定 low 为低点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span><span class="params">(self, prices)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line">        :type prices: List[int]</div><div class="line">        :rtype: int</div><div class="line">        """</div><div class="line">        <span class="keyword">if</span> len(prices) &lt;= <span class="number">1</span>:</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span></div><div class="line">        <span class="keyword">elif</span> len(prices) == <span class="number">2</span>:</div><div class="line">            <span class="keyword">return</span> max(prices[<span class="number">1</span>] - prices[<span class="number">0</span>], <span class="number">0</span>)</div><div class="line">    </div><div class="line">        low = prices[<span class="number">0</span>]</div><div class="line">        high = prices[<span class="number">0</span>]</div><div class="line">        profit = <span class="number">0</span></div><div class="line">        up = <span class="keyword">True</span></div><div class="line">    </div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(len(prices) - <span class="number">1</span>):</div><div class="line">            <span class="keyword">if</span> prices[i + <span class="number">1</span>] &gt;= prices[i]:  <span class="comment"># going up</span></div><div class="line">                high = prices[i + <span class="number">1</span>]</div><div class="line">                up = <span class="keyword">True</span></div><div class="line">                <span class="keyword">if</span> low == <span class="keyword">None</span>:</div><div class="line">                    low = prices[i]</div><div class="line">            <span class="keyword">elif</span> prices[i + <span class="number">1</span>] &lt; prices[i]:</div><div class="line">                <span class="keyword">if</span> up == <span class="keyword">True</span>:</div><div class="line">                    profit += (high - low)</div><div class="line">                up = <span class="keyword">False</span></div><div class="line">                low = <span class="keyword">None</span></div><div class="line">        <span class="keyword">if</span> up == <span class="keyword">True</span>:</div><div class="line">            profit += (high - low)</div><div class="line">        <span class="keyword">return</span> profit</div></pre></td></tr></table></figure>
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/algorithm/">algorithm</a>
    </span>
    

    </div>

    
  </div>
</article>

  
	<div id="comment">
		
	<!-- 多说评论框 start -->
	 <div class="ds-thread" data-thread-key="/2017/03/07/best-time-to-buy-and-sell-stock-ii/" data-title="122. Best Time to Buy and Sell Stock II" data-url="http://faramita.us/2017/03/07/best-time-to-buy-and-sell-stock-ii/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"faramita"};
	  (function() {
	    var ds = document.createElement('script');
	    ds.type = 'text/javascript';ds.async = true;
	    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	    ds.charset = 'UTF-8';
	    (document.getElementsByTagName('head')[0]
	     || document.getElementsByTagName('body')[0]).appendChild(ds);
	  })();
	  </script>
	<!-- 多说公共JS代码 end -->

	</div>




    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 4faramita
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>